"use strict";var _interopRequireDefault=require("@babel/runtime-corejs2/helpers/interopRequireDefault");exports.__esModule=true;exports.default=void 0;var _router=_interopRequireDefault(require("next/router"));var _onDemandEntriesUtils=require("./on-demand-entries-utils");/* global window */var _default=async({assetPrefix})=>{_router.default.ready(()=>{_router.default.events.on('routeChangeComplete',_onDemandEntriesUtils.setupPing.bind(void 0,assetPrefix,()=>_router.default.pathname));});(0,_onDemandEntriesUtils.setupPing)(assetPrefix,()=>_router.default.pathname,_onDemandEntriesUtils.currentPage);document.addEventListener('visibilitychange',event=>{const state=document.visibilityState;if(state==='visible'){(0,_onDemandEntriesUtils.setupPing)(assetPrefix,()=>_router.default.pathname,true);}else{(0,_onDemandEntriesUtils.closePing)();}});};exports.default=_default;