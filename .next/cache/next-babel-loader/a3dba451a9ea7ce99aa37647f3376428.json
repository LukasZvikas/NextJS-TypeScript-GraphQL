{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault2 = require(\"@babel/runtime-corejs2/helpers/interopRequireDefault\");\n\nvar _construct2 = _interopRequireDefault2(require(\"@babel/runtime-corejs2/helpers/esm/construct\"));\n\nvar _interopRequireDefault = require(\"@babel/runtime-corejs2/helpers/interopRequireDefault\");\n\nexports.__esModule = true;\nexports.useRouter = useRouter;\nexports.useRequest = useRequest;\nexports.makePublicRouterInstance = makePublicRouterInstance;\nexports.createRouter = exports.withRouter = exports.default = void 0;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime-corejs2/helpers/extends\"));\n\nvar _defineProperty = _interopRequireDefault(require(\"@babel/runtime-corejs2/core-js/object/define-property\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _router2 = _interopRequireDefault(require(\"next-server/dist/lib/router/router\"));\n\nexports.Router = _router2.default;\n\nvar _routerContext = require(\"next-server/dist/lib/router-context\");\n\nvar _requestContext = require(\"next-server/dist/lib/request-context\");\n\nvar _withRouter = _interopRequireDefault(require(\"./with-router\"));\n\nexports.withRouter = _withRouter.default;\n/* global window */\n\nvar singletonRouter = {\n  router: null,\n  // holds the actual router instance\n  readyCallbacks: [],\n  ready: function ready(cb) {\n    if (this.router) return cb();\n\n    if (typeof window !== 'undefined') {\n      this.readyCallbacks.push(cb);\n    }\n  }\n}; // Create public properties and methods of the router in the singletonRouter\n\nvar urlPropertyFields = ['pathname', 'route', 'query', 'asPath'];\nvar propertyFields = ['components'];\nvar routerEvents = ['routeChangeStart', 'beforeHistoryChange', 'routeChangeComplete', 'routeChangeError', 'hashChangeStart', 'hashChangeComplete'];\nvar coreMethodFields = ['push', 'replace', 'reload', 'back', 'prefetch', 'beforePopState']; // Events is a static property on the router, the router doesn't have to be initialized to use it\n\nObject.defineProperty(singletonRouter, 'events', {\n  get: function get() {\n    return _router2.default.events;\n  }\n});\npropertyFields.concat(urlPropertyFields).forEach(function (field) {\n  // Here we need to use Object.defineProperty because, we need to return\n  // the property assigned to the actual router\n  // The value might get changed as we change routes and this is the\n  // proper way to access it\n  (0, _defineProperty.default)(singletonRouter, field, {\n    get: function get() {\n      var router = getRouter();\n      return router[field];\n    }\n  });\n});\ncoreMethodFields.forEach(function (field) {\n  // We don't really know the types here, so we add them later instead\n  singletonRouter[field] = function () {\n    var router = getRouter();\n    return router[field].apply(router, arguments);\n  };\n});\nrouterEvents.forEach(function (event) {\n  singletonRouter.ready(function () {\n    _router2.default.events.on(event, function () {\n      var eventField = \"on\".concat(event.charAt(0).toUpperCase()).concat(event.substring(1));\n      var _singletonRouter = singletonRouter;\n\n      if (_singletonRouter[eventField]) {\n        try {\n          _singletonRouter[eventField].apply(_singletonRouter, arguments);\n        } catch (err) {\n          // tslint:disable-next-line:no-console\n          console.error(\"Error when running the Router event: \".concat(eventField)); // tslint:disable-next-line:no-console\n\n          console.error(\"\".concat(err.message, \"\\n\").concat(err.stack));\n        }\n      }\n    });\n  });\n});\n\nfunction getRouter() {\n  if (!singletonRouter.router) {\n    var message = 'No router instance found.\\n' + 'You should only use \"next/router\" inside the client side of your app.\\n';\n    throw new Error(message);\n  }\n\n  return singletonRouter.router;\n} // Export the singletonRouter and this is the public API.\n\n\nvar _default = singletonRouter; // Reexport the withRoute HOC\n\nexports.default = _default;\n\nfunction useRouter() {\n  return _react.default.useContext(_routerContext.RouterContext);\n}\n\nfunction useRequest() {\n  return _react.default.useContext(_requestContext.RequestContext);\n} // INTERNAL APIS\n// -------------\n// (do not use following exports inside the app)\n// Create a router and assign it as the singleton instance.\n// This is used in client side when we are initilizing the app.\n// This should **not** use inside the server.\n\n\nvar createRouter = function createRouter() {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  singletonRouter.router = (0, _construct2.default)(_router2.default, args);\n  singletonRouter.readyCallbacks.forEach(function (cb) {\n    return cb();\n  });\n  singletonRouter.readyCallbacks = [];\n  return singletonRouter.router;\n}; // This function is used to create the `withRouter` router instance\n\n\nexports.createRouter = createRouter;\n\nfunction makePublicRouterInstance(router) {\n  var _router = router;\n  var instance = {};\n\n  for (var _i = 0, _urlPropertyFields = urlPropertyFields; _i < _urlPropertyFields.length; _i++) {\n    var property = _urlPropertyFields[_i];\n\n    if (typeof _router[property] === 'object') {\n      instance[property] = (0, _extends2.default)({}, _router[property]); // makes sure query is not stateful\n\n      continue;\n    }\n\n    instance[property] = _router[property];\n  } // Events is a static property on the router, the router doesn't have to be initialized to use it\n\n\n  instance.events = _router2.default.events;\n  propertyFields.forEach(function (field) {\n    // Here we need to use Object.defineProperty because, we need to return\n    // the property assigned to the actual router\n    // The value might get changed as we change routes and this is the\n    // proper way to access it\n    (0, _defineProperty.default)(instance, field, {\n      get: function get() {\n        return _router[field];\n      }\n    });\n  });\n  coreMethodFields.forEach(function (field) {\n    instance[field] = function () {\n      return _router[field].apply(_router, arguments);\n    };\n  });\n  return instance;\n}","map":{"version":3,"sources":["/Users/lukas/Documents/GitHub/nextjs-graphql-typescript/node_modules/next/dist/client/router.js"],"names":["_interopRequireDefault","require","exports","__esModule","useRouter","useRequest","makePublicRouterInstance","createRouter","withRouter","default","_extends2","_defineProperty","_react","_router2","Router","_routerContext","_requestContext","_withRouter","singletonRouter","router","readyCallbacks","ready","cb","window","push","urlPropertyFields","propertyFields","routerEvents","coreMethodFields","Object","defineProperty","get","events","concat","forEach","field","getRouter","event","on","eventField","charAt","toUpperCase","substring","_singletonRouter","err","console","error","message","stack","Error","_default","useContext","RouterContext","RequestContext","args","_router","instance","property"],"mappings":"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","sourcesContent":["\"use strict\";var _interopRequireDefault=require(\"@babel/runtime-corejs2/helpers/interopRequireDefault\");exports.__esModule=true;exports.useRouter=useRouter;exports.useRequest=useRequest;exports.makePublicRouterInstance=makePublicRouterInstance;exports.createRouter=exports.withRouter=exports.default=void 0;var _extends2=_interopRequireDefault(require(\"@babel/runtime-corejs2/helpers/extends\"));var _defineProperty=_interopRequireDefault(require(\"@babel/runtime-corejs2/core-js/object/define-property\"));var _react=_interopRequireDefault(require(\"react\"));var _router2=_interopRequireDefault(require(\"next-server/dist/lib/router/router\"));exports.Router=_router2.default;var _routerContext=require(\"next-server/dist/lib/router-context\");var _requestContext=require(\"next-server/dist/lib/request-context\");var _withRouter=_interopRequireDefault(require(\"./with-router\"));exports.withRouter=_withRouter.default;/* global window */const singletonRouter={router:null,// holds the actual router instance\nreadyCallbacks:[],ready(cb){if(this.router)return cb();if(typeof window!=='undefined'){this.readyCallbacks.push(cb);}}};// Create public properties and methods of the router in the singletonRouter\nconst urlPropertyFields=['pathname','route','query','asPath'];const propertyFields=['components'];const routerEvents=['routeChangeStart','beforeHistoryChange','routeChangeComplete','routeChangeError','hashChangeStart','hashChangeComplete'];const coreMethodFields=['push','replace','reload','back','prefetch','beforePopState'];// Events is a static property on the router, the router doesn't have to be initialized to use it\nObject.defineProperty(singletonRouter,'events',{get(){return _router2.default.events;}});propertyFields.concat(urlPropertyFields).forEach(field=>{// Here we need to use Object.defineProperty because, we need to return\n// the property assigned to the actual router\n// The value might get changed as we change routes and this is the\n// proper way to access it\n(0,_defineProperty.default)(singletonRouter,field,{get(){const router=getRouter();return router[field];}});});coreMethodFields.forEach(field=>{// We don't really know the types here, so we add them later instead\nsingletonRouter[field]=(...args)=>{const router=getRouter();return router[field](...args);};});routerEvents.forEach(event=>{singletonRouter.ready(()=>{_router2.default.events.on(event,(...args)=>{const eventField=`on${event.charAt(0).toUpperCase()}${event.substring(1)}`;const _singletonRouter=singletonRouter;if(_singletonRouter[eventField]){try{_singletonRouter[eventField](...args);}catch(err){// tslint:disable-next-line:no-console\nconsole.error(`Error when running the Router event: ${eventField}`);// tslint:disable-next-line:no-console\nconsole.error(`${err.message}\\n${err.stack}`);}}});});});function getRouter(){if(!singletonRouter.router){const message='No router instance found.\\n'+'You should only use \"next/router\" inside the client side of your app.\\n';throw new Error(message);}return singletonRouter.router;}// Export the singletonRouter and this is the public API.\nvar _default=singletonRouter;// Reexport the withRoute HOC\nexports.default=_default;function useRouter(){return _react.default.useContext(_routerContext.RouterContext);}function useRequest(){return _react.default.useContext(_requestContext.RequestContext);}// INTERNAL APIS\n// -------------\n// (do not use following exports inside the app)\n// Create a router and assign it as the singleton instance.\n// This is used in client side when we are initilizing the app.\n// This should **not** use inside the server.\nconst createRouter=(...args)=>{singletonRouter.router=new _router2.default(...args);singletonRouter.readyCallbacks.forEach(cb=>cb());singletonRouter.readyCallbacks=[];return singletonRouter.router;};// This function is used to create the `withRouter` router instance\nexports.createRouter=createRouter;function makePublicRouterInstance(router){const _router=router;const instance={};for(const property of urlPropertyFields){if(typeof _router[property]==='object'){instance[property]=(0,_extends2.default)({},_router[property]);// makes sure query is not stateful\ncontinue;}instance[property]=_router[property];}// Events is a static property on the router, the router doesn't have to be initialized to use it\ninstance.events=_router2.default.events;propertyFields.forEach(field=>{// Here we need to use Object.defineProperty because, we need to return\n// the property assigned to the actual router\n// The value might get changed as we change routes and this is the\n// proper way to access it\n(0,_defineProperty.default)(instance,field,{get(){return _router[field];}});});coreMethodFields.forEach(field=>{instance[field]=(...args)=>{return _router[field](...args);};});return instance;}"]},"metadata":{},"sourceType":"script"}