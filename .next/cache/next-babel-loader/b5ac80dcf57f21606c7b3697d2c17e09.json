{"ast":null,"code":"import _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/lukas/Documents/GitHub/nextjs-graphql-typescript/pages/register.tsx\";\nimport React, { Component } from 'react';\nimport Layout from '../components/Layout';\nimport { InputField } from '../components/InputField';\nimport { REGISTER_MUTATION } from '../graphql/auth/register';\nimport { Mutation } from 'react-apollo';\nimport { validateEmail } from '../utilities/emailValidation';\nimport { PASS_MISMATCH_ERROR, PASS_LENGTH_ERROR, INVALID_EMAIL_ERROR, UNFILLED_FIELDS_ERROR } from '../utilities/errorMessages';\nimport { Alert } from '../components/Alert';\nimport { ButtonPrimary } from '../components/ButtonPrimary';\nimport { LoadingBar } from '../components/LoadingBar';\nimport AuthRender from '../components/AuthRender';\nimport { withAuthPages } from '../components/withAuthPages';\n\nvar Register =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Register, _Component);\n\n  function Register() {\n    _classCallCheck(this, Register);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Register).apply(this, arguments));\n  }\n\n  _createClass(Register, [{\n    key: \"validatePasswordMatch\",\n    value: function validatePasswordMatch(passwordOne, passwordTwo) {\n      if (passwordOne !== passwordTwo) {\n        return false;\n      }\n\n      return true;\n    }\n  }, {\n    key: \"validatePasswordLength\",\n    value: function validatePasswordLength(password) {\n      if (password.length < 5) {\n        return false;\n      }\n\n      return true;\n    }\n  }, {\n    key: \"validateInputs\",\n    value: function validateInputs(_ref) {\n      var email = _ref.email,\n          password = _ref.password,\n          passwordConfirm = _ref.passwordConfirm;\n\n      if (!email || !password || !passwordConfirm) {\n        return UNFILLED_FIELDS_ERROR;\n      } else if (!validateEmail(email)) {\n        return INVALID_EMAIL_ERROR;\n      } else if (!this.validatePasswordLength(password)) {\n        return PASS_LENGTH_ERROR;\n      } else if (!this.validatePasswordMatch(password, passwordConfirm)) {\n        return PASS_MISMATCH_ERROR;\n      }\n\n      return null;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this = this;\n\n      console.log('this', this.props);\n      return React.createElement(AuthRender, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57\n        },\n        __self: this\n      }, function (_ref2) {\n        var handleSubmit = _ref2.handleSubmit,\n            _onInputChange = _ref2.onInputChange,\n            errorMessage = _ref2.errorMessage,\n            auth = _ref2.auth;\n        return React.createElement(Layout, {\n          title: 'Register',\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 60\n          },\n          __self: this\n        }, React.createElement(Mutation, {\n          mutation: REGISTER_MUTATION,\n          onError: function onError() {},\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 61\n          },\n          __self: this\n        }, function (mutate, _ref3) {\n          var loading = _ref3.loading,\n              error = _ref3.error;\n\n          if (loading) {\n            return React.createElement(LoadingBar, {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 64\n              },\n              __self: this\n            });\n          }\n\n          return React.createElement(\"div\", {\n            className: \"form-container d-flex flex-column justify-content-center\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 67\n            },\n            __self: this\n          }, loading && React.createElement(LoadingBar, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 68\n            },\n            __self: this\n          }), error && React.createElement(Alert, {\n            message: error.graphQLErrors[0].message,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 69\n            },\n            __self: this\n          }), errorMessage && React.createElement(Alert, {\n            message: errorMessage,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 70\n            },\n            __self: this\n          }), React.createElement(\"div\", {\n            className: \"text-center heading heading-large\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 71\n            },\n            __self: this\n          }, \"Register\"), React.createElement(\"div\", {\n            className: \"row d-flex justify-content-center\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 72\n            },\n            __self: this\n          }, React.createElement(\"form\", {\n            className: \"d-flex flex-column col-10 col-sm-6 col-md-3\",\n            onSubmit: handleSubmit.bind(_this, {\n              auth: auth,\n              mutate: mutate,\n              validateInputs: _this.validateInputs\n            }),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 73\n            },\n            __self: this\n          }, React.createElement(InputField, {\n            name: 'email',\n            labelTitle: 'Email',\n            placeholderTitle: 'Enter your email',\n            onInputChange: function onInputChange(e) {\n              return _onInputChange(e);\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 77\n            },\n            __self: this\n          }), React.createElement(InputField, {\n            name: 'password',\n            labelTitle: 'Password',\n            type: \"password\",\n            placeholderTitle: 'Enter your password',\n            onInputChange: function onInputChange(e) {\n              return _onInputChange(e);\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 85\n            },\n            __self: this\n          }), React.createElement(InputField, {\n            name: 'passwordConfirm',\n            labelTitle: 'Confirm password',\n            type: \"password\",\n            placeholderTitle: 'Repeat your password',\n            onInputChange: function onInputChange(e) {\n              return _onInputChange(e);\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 94\n            },\n            __self: this\n          }), React.createElement(ButtonPrimary, {\n            title: 'Sign Up',\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 103\n            },\n            __self: this\n          }))));\n        }));\n      });\n    }\n  }]);\n\n  return Register;\n}(Component);\n\nexport default withAuthPages(Register);","map":{"version":3,"sources":["/Users/lukas/Documents/GitHub/nextjs-graphql-typescript/pages/register.tsx"],"names":["React","Component","Layout","InputField","REGISTER_MUTATION","Mutation","validateEmail","PASS_MISMATCH_ERROR","PASS_LENGTH_ERROR","INVALID_EMAIL_ERROR","UNFILLED_FIELDS_ERROR","Alert","ButtonPrimary","LoadingBar","AuthRender","withAuthPages","Register","passwordOne","passwordTwo","password","length","email","passwordConfirm","validatePasswordLength","validatePasswordMatch","console","log","props","handleSubmit","onInputChange","errorMessage","auth","mutate","loading","error","graphQLErrors","message","bind","validateInputs","e"],"mappings":"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","sourcesContent":["import React, { Component, ChangeEvent } from 'react';\nimport Layout from '../components/Layout';\nimport { InputField } from '../components/InputField';\nimport { REGISTER_MUTATION } from '../graphql/auth/register';\nimport { Mutation } from 'react-apollo';\nimport { validateEmail } from '../utilities/emailValidation';\nimport {\n    PASS_MISMATCH_ERROR,\n    PASS_LENGTH_ERROR,\n    INVALID_EMAIL_ERROR,\n    UNFILLED_FIELDS_ERROR\n} from '../utilities/errorMessages';\nimport { Alert } from '../components/Alert';\nimport { ButtonPrimary } from '../components/ButtonPrimary';\nimport { LoadingBar } from '../components/LoadingBar';\nimport AuthRender from '../components/AuthRender';\nimport { withAuthPages } from '../components/withAuthPages';\nimport { InjectedProps } from '../types/authTypes';\n\nclass Register extends Component<InjectedProps, {}> {\n\n    validatePasswordMatch(passwordOne: string, passwordTwo: string): boolean {\n        if (passwordOne !== passwordTwo) {\n            return false;\n        }\n        return true;\n    }\n\n    validatePasswordLength(password: string): boolean {\n        if (password.length < 5) {\n            return false;\n        }\n        return true;\n    }\n\n    validateInputs(\n        { email, password, passwordConfirm }:\n            { email?: string, password?: string, passwordConfirm?: string }\n    ) {\n        if (!email || !password || !passwordConfirm) {\n            return UNFILLED_FIELDS_ERROR;\n        } else if (!validateEmail(email)) {\n            return INVALID_EMAIL_ERROR;\n        }\n        else if (!this.validatePasswordLength(password)) {\n            return PASS_LENGTH_ERROR;\n        }\n        else if (!this.validatePasswordMatch(password, passwordConfirm)) {\n            return PASS_MISMATCH_ERROR;\n        }\n        return null;\n    }\n\n    render() {\n        console.log('this', this.props)\n        return (\n            <AuthRender>\n                {({ handleSubmit, onInputChange, errorMessage, auth }: InjectedProps) => {\n                    return (\n                        <Layout title={'Register'}>\n                            <Mutation mutation={REGISTER_MUTATION} onError={() => { }}>\n                                {(mutate: any, { loading, error }: any) => {\n                                    if (loading) {\n                                        return <LoadingBar />;\n                                    }\n                                    return (\n                                        <div className=\"form-container d-flex flex-column justify-content-center\">\n                                            {loading && <LoadingBar />}\n                                            {error && <Alert message={error.graphQLErrors[0].message} />}\n                                            {errorMessage && <Alert message={errorMessage} />}\n                                            <div className=\"text-center heading heading-large\">Register</div>\n                                            <div className=\"row d-flex justify-content-center\">\n                                                <form\n                                                    className=\"d-flex flex-column col-10 col-sm-6 col-md-3\"\n                                                    onSubmit={handleSubmit.bind(this, { auth, mutate, validateInputs: this.validateInputs })}\n                                                >\n                                                    <InputField\n                                                        name={'email'}\n                                                        labelTitle={'Email'}\n                                                        placeholderTitle={'Enter your email'}\n                                                        onInputChange={(e: ChangeEvent<HTMLInputElement>) =>\n                                                            onInputChange(e)\n                                                        }\n                                                    />\n                                                    <InputField\n                                                        name={'password'}\n                                                        labelTitle={'Password'}\n                                                        type=\"password\"\n                                                        placeholderTitle={'Enter your password'}\n                                                        onInputChange={(e: ChangeEvent<HTMLInputElement>) =>\n                                                            onInputChange(e)\n                                                        }\n                                                    />\n                                                    <InputField\n                                                        name={'passwordConfirm'}\n                                                        labelTitle={'Confirm password'}\n                                                        type=\"password\"\n                                                        placeholderTitle={'Repeat your password'}\n                                                        onInputChange={(e: ChangeEvent<HTMLInputElement>) =>\n                                                            onInputChange(e)\n                                                        }\n                                                    />\n                                                    <ButtonPrimary title={'Sign Up'} />\n                                                </form>\n                                            </div>\n                                        </div>\n                                    );\n                                }}\n                            </Mutation>\n                        </Layout>)\n                }}\n            </AuthRender>\n        );\n    }\n}\n\nexport default withAuthPages(Register);\n"]},"metadata":{},"sourceType":"module"}