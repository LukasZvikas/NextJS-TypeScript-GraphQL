{"ast":null,"code":"import _objectSpread from \"@babel/runtime-corejs2/helpers/esm/objectSpread\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport { Component } from 'react';\n\nvar AuthRender =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(AuthRender, _Component);\n\n  function AuthRender() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, AuthRender);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(AuthRender)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      auth: {},\n      errorMessage: ''\n    });\n\n    return _this;\n  }\n\n  _createClass(AuthRender, [{\n    key: \"handleSubmit\",\n    value: function handleSubmit(_ref, event) {\n      var auth = _ref.auth,\n          mutate = _ref.mutate,\n          validateInputs = _ref.validateInputs;\n      event.preventDefault();\n      console.log('this.pros', this.props);\n      var isInvalidInputs = validateInputs(auth);\n\n      if (isInvalidInputs) {\n        this.setState({\n          errorMessage: isInvalidInputs\n        });\n        return;\n      }\n\n      ;\n      mutate({\n        variables: _objectSpread({}, auth)\n      });\n    }\n  }, {\n    key: \"clearErrorMessage\",\n    value: function clearErrorMessage() {\n      this.setState({\n        errorMessage: ''\n      });\n    }\n  }, {\n    key: \"onInputChange\",\n    value: function onInputChange(errorMessage, _ref2) {\n      var target = _ref2.target;\n\n      if (errorMessage) {\n        this.clearErrorMessage();\n      }\n\n      this.setState({\n        auth: _objectSpread({}, this.state.auth, _defineProperty({}, target.name, target.value))\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          errorMessage = _this$state.errorMessage,\n          auth = _this$state.auth;\n      return this.props.children({\n        auth: auth,\n        handleSubmit: this.handleSubmit,\n        onInputChange: this.onInputChange.bind(this, errorMessage),\n        errorMessage: errorMessage\n      });\n    }\n  }]);\n\n  return AuthRender;\n}(Component);\n\nexport default AuthRender;","map":{"version":3,"sources":["/Users/lukas/Documents/GitHub/nextjs-graphql-typescript/components/AuthRender.tsx"],"names":["Component","AuthRender","auth","errorMessage","event","mutate","validateInputs","preventDefault","console","log","props","isInvalidInputs","setState","variables","target","clearErrorMessage","state","name","value","children","handleSubmit","onInputChange","bind"],"mappings":";;;;;;;;AAAA,SAASA,SAAT,QAAkD,OAAlD;;IAiCMC,U;;;;;;;;;;;;;;;;;;4DAEM;AACJC,MAAAA,IAAI,EAAE,EADF;AAEJC,MAAAA,YAAY,EAAE;AAFV,K;;;;;;;uCAYJC,K,EACF;AAAA,UAPIF,IAOJ,QAPIA,IAOJ;AAAA,UAPUG,MAOV,QAPUA,MAOV;AAAA,UAPkBC,cAOlB,QAPkBA,cAOlB;AACEF,MAAAA,KAAK,CAACG,cAAN;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ,EAAyB,KAAKC,KAA9B;AACA,UAAMC,eAAe,GAAGL,cAAc,CAACJ,IAAD,CAAtC;;AACA,UAAIS,eAAJ,EAAqB;AACjB,aAAKC,QAAL,CAAc;AAAET,UAAAA,YAAY,EAAEQ;AAAhB,SAAd;AACA;AACH;;AAAA;AAEDN,MAAAA,MAAM,CAAC;AAAEQ,QAAAA,SAAS,oBAAOX,IAAP;AAAX,OAAD,CAAN;AACH;;;wCAEmB;AAChB,WAAKU,QAAL,CAAc;AAAET,QAAAA,YAAY,EAAE;AAAhB,OAAd;AACH;;;kCAEaA,Y,SAA6C;AAAA,UAArBW,MAAqB,SAArBA,MAAqB;;AACvD,UAAIX,YAAJ,EAAkB;AACd,aAAKY,iBAAL;AACH;;AACD,WAAKH,QAAL,CAAc;AACVV,QAAAA,IAAI,oBACG,KAAKc,KAAL,CAAWd,IADd,sBAECY,MAAM,CAACG,IAFR,EAEeH,MAAM,CAACI,KAFtB;AADM,OAAd;AAMH;;;6BAEQ;AAAA,wBAC0B,KAAKF,KAD/B;AAAA,UACGb,YADH,eACGA,YADH;AAAA,UACiBD,IADjB,eACiBA,IADjB;AAEL,aAAO,KAAKQ,KAAL,CAAWS,QAAX,CAAoB;AACvBjB,QAAAA,IAAI,EAAJA,IADuB;AAEvBkB,QAAAA,YAAY,EAAE,KAAKA,YAFI;AAGvBC,QAAAA,aAAa,EAAE,KAAKA,aAAL,CAAmBC,IAAnB,CAAwB,IAAxB,EAA8BnB,YAA9B,CAHQ;AAIvBA,QAAAA,YAAY,EAAZA;AAJuB,OAApB,CAAP;AAMH;;;;EAnDoBH,S;;AAsDzB,eAAeC,UAAf","sourcesContent":["import { Component, ChangeEvent, FormEvent } from 'react';\n\ninterface AuthType {\n    email?: string;\n    password?: string;\n    passwordConfirm?: string;\n}\n\ninterface LoginState {\n    auth: AuthType;\n    errorMessage?: string;\n}\n\ninterface InjectedProps {\n    onInputChange: (e: ChangeEvent<HTMLInputElement>) => void;\n    handleSubmit: ({ auth, mutate, validateInputs }: {\n        auth: AuthType,\n        mutate: any;\n        validateInputs: (auth: AuthType) => string | null\n    }, event: FormEvent<EventTarget>) => void;\n    errorMessage: string;\n    auth: AuthType;\n}\n\ninterface LoginProps {\n    user?: {\n        email: string;\n        _id: string;\n    };\n    data?: any;\n    children(props: InjectedProps): JSX.Element;\n}\n\nclass AuthRender extends Component<LoginProps, LoginState> {\n\n    state = {\n        auth: {},\n        errorMessage: ''\n    };\n\n    handleSubmit(\n        { auth, mutate, validateInputs }:\n            {\n                auth: AuthType,\n                mutate: any,\n                validateInputs: any\n            },\n        event: FormEvent<EventTarget>\n    ) {\n        event.preventDefault();\n        console.log('this.pros', this.props)\n        const isInvalidInputs = validateInputs(auth);\n        if (isInvalidInputs) {\n            this.setState({ errorMessage: isInvalidInputs });\n            return;\n        };\n\n        mutate({ variables: { ...auth } });\n    };\n\n    clearErrorMessage() {\n        this.setState({ errorMessage: '' });\n    };\n\n    onInputChange(errorMessage: string, { target }: any): void {\n        if (errorMessage) {\n            this.clearErrorMessage();\n        }\n        this.setState({\n            auth: {\n                ...this.state.auth,\n                [target.name]: target.value\n            }\n        });\n    };\n\n    render() {\n        const { errorMessage, auth } = this.state;\n        return this.props.children({\n            auth,\n            handleSubmit: this.handleSubmit,\n            onInputChange: this.onInputChange.bind(this, errorMessage),\n            errorMessage\n        });\n    }\n}\n\nexport default AuthRender;"]},"metadata":{},"sourceType":"module"}